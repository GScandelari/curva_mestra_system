# üö® Guia de Resolu√ß√£o - Erro SYS_001

## ‚ùå Problema
Voc√™ est√° vendo o erro: **"Erro interno do servidor. Tente novamente. C√≥digo: SYS_001"**

## üîç Diagn√≥stico Realizado

‚úÖ **Firebase Functions**: Todas funcionando corretamente
‚úÖ **Servidor Local**: Rodando em http://localhost:3000
‚úÖ **Configura√ß√£o Firebase**: Presente e v√°lida
‚úÖ **APIs Backend**: Respondendo normalmente

## üéØ Causa Prov√°vel
O erro SYS_001 est√° sendo gerado no **frontend** da aplica√ß√£o, n√£o no backend.

## üîß Solu√ß√µes Imediatas

### 1. Limpar Cache do Navegador
```bash
# Pressione estas teclas no navegador:
Ctrl + Shift + R  # (Windows/Linux)
Cmd + Shift + R   # (Mac)
```

### 2. Verificar Console do Navegador
1. Abra o navegador em http://localhost:3000
2. Pressione **F12** para abrir Developer Tools
3. V√° para a aba **Console**
4. Procure por erros em vermelho
5. V√° para a aba **Network**
6. Recarregue a p√°gina (F5)
7. Veja se h√° requisi√ß√µes falhando (em vermelho)

### 3. Reiniciar Servidor de Desenvolvimento
```bash
# No terminal, pare o servidor (Ctrl+C) e reinicie:
cd frontend
npm run dev
```

### 4. Verificar Logs em Tempo Real
```bash
# Em um terminal separado:
firebase functions:log --project curva-mestra --follow
```

## üîç Investiga√ß√£o Detalhada

### Poss√≠veis Causas no Frontend:

#### A. Erro de Inicializa√ß√£o do Firebase
**Sintomas**: Erro logo ao carregar a p√°gina
**Solu√ß√£o**:
```bash
# Verificar se as vari√°veis de ambiente est√£o corretas
cat frontend/.env
```

#### B. Erro de Autentica√ß√£o
**Sintomas**: Erro ao tentar fazer login
**Solu√ß√£o**:
1. Verificar se o usu√°rio existe no Firebase Console
2. Testar login com credenciais v√°lidas
3. Verificar se o token n√£o expirou

#### C. Erro de Permiss√µes Firestore
**Sintomas**: Erro ao carregar dados
**Solu√ß√£o**:
```bash
# Verificar regras do Firestore
firebase firestore:rules --project curva-mestra
```

#### D. Erro de CORS
**Sintomas**: Erro de "blocked by CORS policy"
**Solu√ß√£o**: J√° foi corrigido nas configura√ß√µes

## üõ†Ô∏è Passos de Debug Avan√ßado

### 1. Testar Componente por Componente
```javascript
// No console do navegador, teste:
console.log('Firebase config:', window.firebase);
console.log('Auth state:', firebase.auth().currentUser);
```

### 2. Verificar Estado da Aplica√ß√£o
```javascript
// No console do navegador:
console.log('App state:', window.__REACT_DEVTOOLS_GLOBAL_HOOK__);
```

### 3. Testar APIs Manualmente
```bash
# Testar fun√ß√£o sem autentica√ß√£o:
curl -X POST https://us-central1-curva-mestra.cloudfunctions.net/validateAdminInitialization \
  -H "Content-Type: application/json" \
  -d '{"data": {}}'
```

## üìã Checklist de Verifica√ß√£o

- [ ] Servidor de desenvolvimento rodando (http://localhost:3000)
- [ ] Console do navegador sem erros JavaScript
- [ ] Aba Network sem requisi√ß√µes falhando
- [ ] Firebase Functions respondendo (testado ‚úÖ)
- [ ] Arquivo .env com configura√ß√µes corretas
- [ ] Cache do navegador limpo
- [ ] Usu√°rio com permiss√µes adequadas

## üöÄ Solu√ß√µes Espec√≠ficas por Cen√°rio

### Cen√°rio 1: Erro ao Carregar a P√°gina
```bash
# 1. Limpar cache
# 2. Verificar console
# 3. Reiniciar servidor
cd frontend && npm run dev
```

### Cen√°rio 2: Erro ao Fazer Login
```bash
# 1. Verificar credenciais
# 2. Testar com usu√°rio admin conhecido:
#    Email: scandelari.guilherme@hotmail.com
# 3. Verificar Firebase Console
```

### Cen√°rio 3: Erro ao Carregar Dados
```bash
# 1. Verificar permiss√µes do usu√°rio
# 2. Testar APIs diretamente
node scripts/testAPIClient.js no-auth
```

## üÜò Se Nada Funcionar

### Op√ß√£o 1: Reset Completo
```bash
# Parar servidor
Ctrl+C

# Limpar cache npm
cd frontend
npm run build
rm -rf node_modules
npm install
npm run dev
```

### Op√ß√£o 2: Verificar Logs Detalhados
```bash
# Terminal 1: Logs Firebase
firebase functions:log --project curva-mestra --follow

# Terminal 2: Servidor com debug
cd frontend
DEBUG=* npm run dev
```

### Op√ß√£o 3: Modo de Recupera√ß√£o
```bash
# Usar vers√£o de backup ou branch est√°vel
git status
git log --oneline -5
```

## üìû Pr√≥ximos Passos

1. **Siga os passos na ordem apresentada**
2. **Anote exatamente onde o erro ocorre**
3. **Copie mensagens de erro completas**
4. **Teste em modo inc√≥gnito do navegador**
5. **Se persistir, forne√ßa logs espec√≠ficos**

## üéØ Informa√ß√µes para Suporte

Se precisar de ajuda adicional, forne√ßa:
- **Quando** o erro ocorre (login, carregamento, a√ß√£o espec√≠fica)
- **Mensagens** do console do navegador
- **Requisi√ß√µes** que est√£o falhando (aba Network)
- **Logs** do Firebase Functions
- **Vers√£o** do navegador e sistema operacional

---

**Status**: ‚úÖ Sistema funcionando - Erro localizado no frontend
**√öltima verifica√ß√£o**: 21/10/2025 14:35