{
  "permissions": {
    "allow": [
      "Bash(export NVM_DIR=\"$HOME/.nvm\")",
      "Bash([ -s \"$NVM_DIR/nvm.sh\" ])",
      "Bash(. \"$NVM_DIR/nvm.sh\")",
      "Bash(firebase projects:list:*)",
      "Bash(npm install)",
      "Bash(firebase apps:sdkconfig:*)",
      "Bash(firebase deploy:*)",
      "Bash(firebase emulators:start:*)",
      "Bash(sudo apt update:*)",
      "Bash(sudo apt install:*)",
      "Bash(npm run build:*)",
      "Bash(npm install:*)",
      "Bash(npm run dev:*)",
      "Bash(curl:*)",
      "Bash(test:*)",
      "Bash(cat:*)",
      "Bash(node scripts/setup-test-users.js:*)",
      "Bash(mkdir:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(cd:*)",
      "Bash(pkill:*)",
      "Bash(node dev-tools/setup-complete-environment.js:*)",
      "Bash(npm run type-check:*)",
      "Bash(npm ls:*)",
      "Bash(killall:*)",
      "Bash(ls:*)",
      "Bash(lsof:*)",
      "Bash(node scripts/import-master-products.js)",
      "Bash(node scripts/seed-emulator.js:*)",
      "Bash(NODE_ENV=production firebase deploy:*)",
      "Bash(export NODE_ENV=production)",
      "Bash(git checkout:*)",
      "Bash(java -version:*)",
      "Bash(xargs kill:*)",
      "Bash(node dev-tools/check-inventory.js:*)",
      "Bash(node dev-tools/fix-inventory-data.js:*)",
      "Bash(unset NODE_ENV)",
      "Bash(tail:*)",
      "Bash(export NODE_ENV=\"\")",
      "Bash(env)",
      "Bash(env:*)",
      "Bash(tee:*)",
      "Bash(node dev-tools/setup-production.js:*)",
      "Bash(node -e:*)",
      "Bash(timeout 15 node:*)",
      "Bash(timeout 60 firebase deploy:*)",
      "Bash(npm audit:*)",
      "Bash(timeout 600 firebase deploy:*)",
      "Bash(firebase experiments:enable:*)",
      "Bash(npm start)",
      "Bash(chmod:*)",
      "Bash(node:*)",
      "Bash(nvm --version:*)",
      "Bash(nvm ls:*)",
      "Bash(nvm install:*)",
      "Bash(nvm use:*)",
      "Bash(npm --version:*)",
      "Bash(nc:*)",
      "Bash(firebase use:*)",
      "Bash(firebase functions:secrets:access:*)",
      "Bash(npx next build)",
      "Bash(find:*)",
      "Bash(./cleanup-old-functions.sh)",
      "Bash(firebase functions:delete:*)",
      "Bash(firebase functions:list:*)",
      "WebSearch",
      "WebFetch(domain:dev.pagseguro.uol.com.br)",
      "WebFetch(domain:faq.pagbank.com.br)",
      "WebFetch(domain:developer.pagbank.com.br)",
      "Bash(firebase functions:secrets:set:*)",
      "Bash(wc:*)",
      "Bash(xargs sed:*)",
      "Bash(echo:*)",
      "Bash(npx shadcn@latest add tabs)",
      "Bash(grep:*)",
      "Bash(npm view:*)",
      "Bash(npx fix-react2shell-next --fix)",
      "Bash(NODE_ENV=production timeout 600 firebase deploy:*)",
      "Bash(rm:*)",
      "Bash(firebase:*)",
      "Bash(gcloud secrets describe:*)",
      "Bash(timeout 180 firebase deploy:*)",
      "Bash(. \"$NML_DIR/nvm.sh\")",
      "Bash(timeout 20 firebase deploy:*)",
      "Bash(gh workflow:*)",
      "Bash(npx tsc:*)",
      "Bash(indisponível no momento. Procure o administrador da clínica ou entre)",
      "Bash(em contato com o suporte técnico Curva Mestra.\"\n- clinic_admin: Can only access /clinic/my-clinic and /clinic/profile\n- system_admin: Never blocked\n\nChanges:\n- useTenantSuspension: Added isInactive flag to monitor tenant.active\n- SuspensionInterceptor: Added logic to restrict clinic_admin routes\n  when clinic is inactive \\(not suspended\\)\n- login/page.tsx: Added check for clinic status, blocks clinic_user\n  with custom message and logs them out\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(openssl genpkey:*)",
      "Bash(openssl rsa:*)",
      "WebFetch(domain:github.com)",
      "Bash(npm ci:*)",
      "Bash(xargs -I{} curl -s \"https://api.github.com/repos/GScandelari/curva_mestra_system/actions/runs/{}/jobs\")",
      "Bash(gcloud functions describe:*)",
      "Bash(git check-ignore:*)",
      "Bash(git rm:*)",
      "Bash(gh run:*)",
      "WebFetch(domain:api.github.com)",
      "Bash(python3:*)",
      "Bash(printf:*)",
      "WebFetch(domain:status.cloud.google.com)",
      "Bash(gh issue create --repo firebase/firebase-tools --title \"Internal error during firebase deploy --only hosting with Next.js 15\" --body \"$\\(cat <<''EOF''\n## Environment info\n\n- **firebase-tools version:** latest \\(used in GitHub Actions\\)\n- **Platform:** GitHub Actions \\(ubuntu-latest\\)\n- **Node version:** 20\n- **Next.js version:** 15.5.9\n- **Firebase SDK version:** 11.1.0\n\n## Steps to reproduce\n\n1. Run `firebase deploy --only hosting` for a Next.js 15 project\n2. Build completes successfully\n3. Deploy fails at the final step\n\n## Expected behavior\n\nDeploy should complete successfully.\n\n## Actual behavior\n\nDeploy fails with:\n```\nError: An Internal error has occurred. Please try again in a few minutes. If this error persists, please open an issue at https://github.com/firebase/firebase-tools\n```\n\nThe error occurs after:\n```\ni  functions: generating the service identity for pubsub.googleapis.com...\ni  functions: generating the service identity for eventarc.googleapis.com...\n```\n\n## Additional context\n\n- The build phase completes successfully \\(74 static pages generated\\)\n- The error has persisted for several hours across multiple retry attempts\n- Previous deploys to the same project worked fine\n- The function being deployed is `ssrcurvamestra` \\(SSR for Next.js\\)\n\nFull log output shows the deploy reaches the final stage before failing:\n```\ni  functions: packaged .firebase/curva-mestra/functions \\(85.07 MB\\) for uploading\ni  functions: ensuring required API run.googleapis.com is enabled...\ni  functions: ensuring required API eventarc.googleapis.com is enabled...\ni  functions: ensuring required API pubsub.googleapis.com is enabled...\ni  functions: ensuring required API storage.googleapis.com is enabled...\n✔  functions: required API eventarc.googleapis.com is enabled\n✔  functions: required API storage.googleapis.com is enabled\n✔  functions: required API pubsub.googleapis.com is enabled\n✔  functions: required API run.googleapis.com is enabled\ni  functions: generating the service identity for pubsub.googleapis.com...\ni  functions: generating the service identity for eventarc.googleapis.com...\n\nError: An Internal error has occurred.\n```\nEOF\n\\)\")"
    ],
    "deny": [],
    "ask": []
  }
}
